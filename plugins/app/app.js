!function(t){t.plugins.app=function(e){this.id=e;var n=this;return this.container=function(e){var i=this;return this.container={},this.container.id=e,this.container.appid=n.id,this.__construct=function(t){this.container.routeMonitor()},this.container.dom=function(e){return t.element(i.container.id+" "+e)},this.container.storage=function(t,e){return null!=e?(sessionStorage.setItem(t,e),!0):sessionStorage.getItem(t)},this.container.routeMonitor=function(e){checkUrl=function(t,e){var n=String(t).split("/"),i=String(e).split("/"),r=(n[n.length-1],!1);for(key in i){if(i[key]!=n[key]&&"*"!==n[key]&&"*"!=t)return!1;r=!0}return r};var n=function(e,n){if(null==document.querySelector(n.container.id))return console.log("vizoo.app: container ["+n.container.id+"] not found"),!1;if(1==checkUrl(e.url,e.hashCurrent)){var i=function(t,e){return void 0==e&&(e=!0),null!=t&&(i.context=t,1==e&&(document.querySelector(n.container.id).innerHTML=i.context)),i.context};if(void 0!=e.files){document.querySelector(n.container.id).innerHTML="";var r=!1;for(keyFiles in e.files){var o=String(e.files[keyFiles]).split("/"),c=o[o.length-1].split("."),l=c[c.length-1],u=e.files[keyFiles];u=(u=u.replace("*","")).replace(/\/\//g,"/"),"js"==l?((s=document.createElement("script")).type="text/javascript",s.src=u,document.querySelector(n.container.id).appendChild(s)):"css"==l?((s=document.createElement("link")).rel="stylesheet",s.href=u,document.querySelector(n.container.id).appendChild(s)):"html"==l&&(r=!0,t.ajax({url:u,success:function(t){document.createElement("div");var r=document.querySelector(n.container.id).innerHTML;e.content?(i(r+t,!1),htmlContent=e.content(i,e.hashCurrent)):(htmlContent=r+t,document.querySelector(n.container.id).innerHTML=htmlContent)}}))}0==r&&(i(a,!1),htmlContent=e.content(i,e.hashCurrent))}else{var s=document.createElement("div"),a=document.querySelector(n.container.id).innerHTML;e.content?(i(a,!1),htmlContent=e.content(i,e.hashCurrent)):(htmlContent=a,document.querySelector(n.container.id).innerHTML=htmlContent)}return!0}return!1},r=String(window.location.hash).substring(1);r.split("/");for(key in this.route.list){var o=this.route.list[key];o.hashCurrent!=r&&(o.hashCurrent=r,$result=n(o,i),$result)}setTimeout(function(){i.container.routeMonitor()},300)},this.container.route=function(e){if(e.id)var n=e.id;else n=t.string.generator().id;return void 0==this.route.list&&(this.route.list={}),void 0==this.route.listUrl&&(this.route.listUrl={}),void 0!=e&&(this.route.list[n]=e,this.route.listUrl[e.url]=e),this},this.container.action=function(t,e){return this.action[t]=e,this},this.container.element=function(t,e){if("string"==typeof t){if(void 0==i.container.id)var n=document.querySelectorAll(t);else n=document.querySelectorAll(i.container.id+" "+t);for(var r=0;r<n.length;r++)1!=(o=n[r]).appContainerElementInit&&(o.appContainerElementInit=1,function(t,e){for(keyEvent in e.event)t.keyEvent=keyEvent,t["on"+keyEvent]=function(){var n=this.keyEvent;if(e.event[n])return e.event[n].call(t)}}(o,e))}else if("object"==typeof t)for(key in t)for(n=void 0==i.container.id?document.querySelectorAll(t[key]):document.querySelectorAll(i.container.id+" "+t[key]),r=0;r<n.length;r++){var o;1!=(o=n[r]).appContainerElementInit&&(o.appContainerElementInit=1,function(t,e){for(keyEvent in e.event)t["on"+keyEvent]=function(){if(e.event[keyEvent])return e.event[keyEvent].call(t)}}(o,e))}return setTimeout(function(){i.container.element(t,e)},1e3),this},this.__construct(),this.container},this}}(vizoo);