/* Vizoo - v1.0.0 - http://vizoo.online - Wallace Rio <wallrio@gmail.com> */
/* Vizoo - v1.0.0 - http://vizoo.online - Wallace Rio <wallrio@gmail.com> */
/* Vizoo - v1.0.0 - http://vizoo.online - Wallace Rio <wallrio@gmail.com> */
/* Vizoo - v1.0.0 - http://vizoo.online - Wallace Rio <wallrio@gmail.com> */
!function(e){var t={layout:'<div data-vizoo-window-bg data-id="{data-id}" data-background="{background}"></div><div data-vizoo-window-box data-id="{data-id}" ><div data-vizoo-window-header data-id="{data-id}"></div><div data-vizoo-window-main data-id="{data-id}"></div><div data-vizoo-window-footer data-id="{data-id}"></div></div>',dependence:{list:["essentials"],status:null},status:{lastZindex:1e3},touchInit:function(a){e.plugins.essentials.touch(a,{start:function(e){if(null==a)return!1;var i=a.getAttribute("data-id"),n=document.querySelector("[data-vizoo-window-wrapper]#"+i);t.status.lastZindex++,t.status.lastZindex++;var o=n.querySelector("[data-vizoo-window-bg]"),d=n.querySelector("[data-vizoo-window-box]");o.style["z-index"]=t.status.lastZindex,d.style["z-index"]=t.status.lastZindex+1}})},preMake:function(a){var i=a.type||null;if("info"==i){var n=a.title||"",o=a.description||"";a.addInput({container:"header",type:"label",value:n}).addInput({container:"main",type:"p",value:o}).addInput({container:"footer",type:"button",value:"Ok",class:"highlight",event:{click:function(e,t){t.close()}}}),t.make(a)}else if("clousure"==i){n=a.title||"";var d=a.url||"",r=a.close||!1;a.addInput({container:"main",type:"div",value:'<iframe src="'+d+'" style="border:0px;width:100%;height:100%">'}),""!=n&&a.addInput({container:"header",type:"label",value:n}),1==r&&a.addInput({container:"header",type:"span",value:"",class:"closeWindow",event:{click:function(e,t){t.close()}}}),t.make(a)}else if("image"==i){n=a.title||"",d=a.url||"",r=a.close||!1;a.addInput({container:"main",type:"img-full",value:d}),""!=n&&a.addInput({container:"header",type:"label",value:n}),1==r&&a.addInput({container:"header",type:"span",value:"",class:"closeWindow",event:{click:function(e,t){t.close()}}}),t.make(a)}else if("import"==i){n=a.title||"",d=a.url||"",r=a.close||!1;e.ajax({url:d,success:function(e){a.addInput({container:"main",type:"div",value:e}),""!=n&&a.addInput({container:"header",type:"label",value:n}),1==r&&a.addInput({container:"header",type:"span",value:"",class:"closeWindow",event:{click:function(e,t){t.close()}}}),t.make(a)}})}},makeInputs:function(e){for(var t="",a="",i="",n="",o=0;o<e.length;o++){var d=e[o],r=d.id||null,u=d.container||null,l=d.type||null,c=d.value||"";if(void 0!=d.class)var s='class="'+d.class+'"';else s="";"label"==l&&(t='<label data-id="'+r+'" '+s+"  >"+c+"</label>"),"p"==l&&(t='<p data-id="'+r+'" '+s+">"+c+"</p>"),"button"==l&&(t='<button data-id="'+r+'" '+s+">"+c+"</button>"),"div"==l&&(t='<div data-id="'+r+'" '+s+">"+c+"</div>"),"span"==l&&(t='<span data-id="'+r+'" '+s+">"+c+"</span>"),"img"==l&&(t='<img data-id="'+r+'" src="'+c+'" '+s+" />"),"img-full"==l&&(t='<img data-id="'+r+'" src="'+c+'" '+s+" img-full />"),"header"==u?a+=t:"main"==u?i+=t:"footer"==u&&(n+=t)}return{header:a,main:i,footer:n}},make:function(e){var a=!0;0==e.wrapperTagForm&&(a=!1);var i=e.id||null,n=e.background||!1;if(1==a)var o=document.createElement("form");else o=document.createElement("div");null==i&&(i="vizoo_window_"+(new Date).getTime().toString(36));if(void 0==document.querySelector("[data-vizoo-window-wrapper]#"+i)){var d=t.layout;d=(d=d.replace(/{data-id}/g,i)).replace(/{background}/g,n),o.setAttribute("data-vizoo-window-wrapper",""),o.id=i,o.name=i,o.attr=e,o.innerHTML=d;var r=e.container||null,u=document.querySelector('[data-vizoo-window-container][data-id="'+r+'"]');void 0!=u?u.appendChild(o):document.querySelector("body").appendChild(o)}else o=document.querySelector("[data-vizoo-window-wrapper]#"+i);t.status.lastZindex++,t.status.lastZindex++;var l=o.querySelector("[data-vizoo-window-bg]"),c=o.querySelector("[data-vizoo-window-box]");l.style["z-index"]=t.status.lastZindex,c.style["z-index"]=t.status.lastZindex+1,t.touchInit(o.querySelector("[data-vizoo-window-box]")),t.insertBar(o);var s=e.width||"200px",v=e.height||"200px";o.querySelector("[data-vizoo-window-box]").style.width=s,o.querySelector("[data-vizoo-window-box]").style.height=v,e.id=o.id;var w=t.makeInputs(e.inputs);o.querySelector("[data-vizoo-window-header]").innerHTML=w.header,o.querySelector("[data-vizoo-window-main]").innerHTML=w.main,o.querySelector("[data-vizoo-window-footer]").innerHTML=w.footer,t.makeEvents(o,e.inputs),setTimeout(function(){t.show("#"+e.id)},10)},insertBar:function(e){var a=e.attr,i=a.container||null,n=a.title||"",o=a.id||"";if(null!=i){if(void 0!=document.querySelector('[data-id="windowbar_'+o+'"]'))return!1;var d=document.createElement("li");d.setAttribute("data-id","windowbar_"+o),d.innerHTML="<a>"+n+"</a>";var r=document.querySelector('[data-vizoo-window-bar][data-id="'+i+'"]');void 0!=r&&(void 0==r.querySelector("ul")?r.innerHTML='<ul><li data-id="windowbar_'+o+'"><a>'+n+"</a></li></ul>":r.querySelector("ul").appendChild(d)),void 0!=document.querySelector('[data-id="windowbar_'+o+'"]')&&(document.querySelector('[data-id="windowbar_'+o+'"]').onclick=function(){var e=document.querySelector("[data-vizoo-window-wrapper]#"+o);t.status.lastZindex++,t.status.lastZindex++;var a=e.querySelector("[data-vizoo-window-bg]"),i=e.querySelector("[data-vizoo-window-box]");a.style["z-index"]=t.status.lastZindex,i.style["z-index"]=t.status.lastZindex+1})}},removeBar:function(e){e.attr.container;var t=e.attr.id,a=document.querySelector('[data-id="windowbar_'+t+'"]');void 0!=a&&a.parentNode.removeChild(a)},action:function(e){return{close:function(a){t.removeBar(e),null==a&&(a=e.id),t.hide("#"+a)}}},makeEvents:function(e,a){for(var i=0;i<a.length;i++){var n=a[i],o=n.event||null;if(null!==o)for(keyWindow in o){var d=n.id;document.querySelector('[data-id="'+d+'"]').element=e,document.querySelector('[data-id="'+d+'"]')["on"+keyWindow]=function(e){var a=this.element;o[keyWindow].call(this,e,t.action(a))}}}},show:function(a){var i=document.querySelector(a);i.setAttribute("data-status","active"),i.querySelector("[data-vizoo-window-box]").setAttribute("data-status","active"),e.addEvent(i,"click",function(e){null!=e.target.getAttribute("data-vizoo-window-wrapper")&&t.hide("#"+this.id)},!1)},hide:function(e){var t=document.querySelector(e);t.removeAttribute("data-status"),t.querySelector("[data-vizoo-window-box]").removeAttribute("data-status"),setTimeout(function(){},1e3)},remove:function(e){var t=document.querySelector(e);t.parentNode.removeChild(t)},defMethod:function(e){e.inputs=[],e.addInput=function(a){var i=t.generatorNumberUniquer();return e.inputs[e.inputs.length]=a,e.inputs[e.inputs.length-1].id=i,e}},generatorNumberUniquer:function(){return"_"+Math.random().toString(36).substr(2,9)},monitor:function(){for(var a=document.querySelectorAll("[data-vizoo-window]"),i=0;i<a.length;i++){var n=a[i];if(1!=n.windowInit){n.windowInit=1;var o=n.getAttribute("data-vizoo-window"),d=((o=e.string.stringToObject(o)).type,o.title,o.event||""),r=(o.description,!1);if(!1!==o.autoload&&void 0!==o.autoload)r=o.autoload;!1!==r&&setTimeout(function(e){t.defMethod(e),t.preMake(e)},r,o),e.addEvent(n,d,function(e,a){t.defMethod(a),t.preMake(a)},null,o)}}setTimeout(function(){t.monitor()},1e3)},__construct:function(){t.monitor()}};e.plugin.require(t.dependence.list,function(){t.dependence.dependence=!0,t.__construct()}),e.plugins.window=t}(vizoo);